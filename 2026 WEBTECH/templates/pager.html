<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Camera Records Lite3</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
<style>
body {
    margin: 0;
    font-family: Courier, monospace;
    background: url("{{ url_for('static', filename='Photo Gauge.jpg') }}") no-repeat center center fixed;
    background-size: cover;
}
.sidebar {
    position: fixed; top:0; left:0; width:260px; height:100vh; background:#1F1F1F;
    color:white; padding:30px 20px;
}
.sidebar h2 { font-size:22px; font-weight:bold; }
.sidebar p { font-size:12px; color:#ccc; white-space: pre-line; }
.main { margin-left:260px; padding:30px; }
.form-box { background: rgba(42,42,42,0.85); padding:30px; border-radius:8px;
    color:white; max-width:650px; margin:auto; }
.btn-dark-custom { background:#343434; color:white; font-weight:bold; }
.btn-dark-custom:hover { background:#555; }
.main-header-box { background: rgba(0,0,0,0.6); padding:15px 20px; border-radius:8px;
    text-align:center; margin-bottom:30px; }
.main-header { color:white; margin:0; }
</style>
</head>
<body>

<div class="sidebar">
    <h2>Photo Gauge's<br>Camera Records</h2>
    <p>
A simple camera record application
for managing camera records.
This Photo is Taken By:

Lancelot Ishi C. Diniega
BiÃ±an Esplanade, Laguna
    </p>
</div>

<div class="main">

    <!-- Title -->
    <div class="main-header-box">
        <h2 class="main-header">Camera Records Lite</h2>
    </div>

    <!-- Camera Cards View -->
    <div class="mb-3 text-end">
        <a href="{{ url_for('cards_view') }}" class="btn btn-dark-custom">ðŸ“· Camera Records BoardView</a>
    </div>

    <!-- FORM -->
    <div class="form-box mb-4">
        <h3>{{ 'Edit Camera' if edit else 'Add Camera' }}</h3>
        <form method="POST" enctype="multipart/form-data" action="{{ url_for('register') }}">
            {% if edit %}
                <input type="hidden" name="id" value="{{ edit.id }}">
            {% endif %}

            <div class="mb-2">
                <label>Camera Brand</label>
                <input type="text" name="CameraBrand" class="form-control"
                       value="{{ edit.CameraBrand if edit else '' }}" required>
            </div>

            <div class="mb-2">
                <label>Camera Model</label>
                <input type="text" name="CameraModel" class="form-control"
                       value="{{ edit.CameraModel if edit else '' }}" required>
            </div>

            <div class="mb-2">
                <label>Camera Type</label>
                <input type="text" name="CameraType" class="form-control"
                       value="{{ edit.CameraType if edit else '' }}" required>
            </div>

            <div class="mb-2">
                <label>Email</label>
                <input type="email" name="email" class="form-control"
                       value="{{ edit.email if edit else '' }}" required>
            </div>

            <div class="mb-2">
                <label>Year Date (YYYY-MM-DD)</label>
                <input type="text" name="year_date" class="form-control"
                       value="{{ edit.year_date if edit else '' }}" required>
            </div>

            <div class="mb-2">
                <label>Camera Photo</label>
                <input type="file" name="photo" class="form-control">
                {% if edit and edit.photo %}
                    <small>Current photo: <a href="{{ url_for('static', filename=edit.photo) }}" target="_blank">View</a></small>
                {% endif %}
            </div>

            <button type="submit" class="btn btn-dark-custom w-100 mt-2">
                {{ 'Update Camera' if edit else 'Add Camera' }}
            </button>
        </form>
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            <div class="mt-3">
              {% for category, message in messages %}
                <div class="alert alert-{{ category }}">{{ message }}</div>
              {% endfor %}
            </div>
          {% endif %}
        {% endwith %}
    </div>

    <!-- TABLE -->
    <table class="table table-dark table-striped mb-5">
        <thead>
            <tr>
                <th>ID</th>
                <th>Brand</th>
                <th>Model</th>
                <th>Type</th>
                <th>Email</th>
                <th>Date</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for cam in cameras %}
            <tr>
                <td>{{ cam.id }}</td>
                <td>{{ cam.CameraBrand }}</td>
                <td>{{ cam.CameraModel }}</td>
                <td>{{ cam.CameraType }}</td>
                <td>{{ cam.email }}</td>
                <td>{{ cam.year_date }}</td>
                <td>
                    <a href="{{ url_for('edit_camera', id=cam.id) }}" class="btn btn-sm btn-dark-custom">Edit</a>
                    <a href="{{ url_for('delete_camera', id=cam.id) }}" class="btn btn-sm btn-danger"
                       onclick="return confirm('Delete this camera?')">Delete</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- BOTTOM LEFT NAV BUTTON -->
<div style="position: fixed; bottom: 20px; left: 20px; z-index: 999; display: flex; gap: 10px;">
    <a href="{{ url_for('login') }}" class="btn btn-dark-custom">
        ðŸ”™ Back to Login
    </a>

</div>
</body>
</html>